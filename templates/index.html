<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YouTube Cutter Web UI</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    textarea { width: 100%; height: 6em; }
    pre { background: #f0f0f0; padding: 1em; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>YouTube Cutter</h1>
  <form method="post" enctype="multipart/form-data">
    <label>Pause (seconds):
      <input name="pause" required value="{{ pause|default('') }}">
    </label><br><br>
    <label>Fade (seconds):
      <input name="fade" required value="{{ fade|default('') }}">
    </label><br><br>
    <input type="hidden" name="job_id" value="{{ job_id|default('') }}">
    <label>Upload MP3 files (optional):
      <input type="file" name="files" accept=".mp3" multiple>
    </label><br><br>
    <label>Segments (one per line, file/start/end):</label><br>
    <textarea name="segments" rows="6">{{ segments|default('') }}</textarea><br>
    <button type="submit">Run</button>
    <button type="reset">Clear</button>
  </form>

  {% if logs %}
    <h2>Logs</h2>
    <pre>{{ logs }}</pre>
  {% endif %}

  {% if download_url %}
    <p><a href="{{ download_url }}">Download result</a></p>
  {% endif %}

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var fileInput = document.querySelector('input[name="files"]');
      var textarea = document.querySelector('textarea[name="segments"]');
      fileInput.addEventListener('change', function() {
        if (this.files.length > 9) {
          alert('Please select at most 9 files');
          this.value = '';
          textarea.value = '';
          return;
        }
        var names = Array.from(this.files).map(function(f) { return f.name; });
        textarea.value = names.join('\n');
      });
    });
  </script>
</body>
</html>
